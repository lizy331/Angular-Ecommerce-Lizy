{"ast":null,"code":"'use strict';\n\nvar $ = require('../internals/export');\n\nvar aMap = require('../internals/a-map');\n\nvar MapHelpers = require('../internals/map-helpers');\n\nvar get = MapHelpers.get;\nvar has = MapHelpers.has;\nvar set = MapHelpers.set; // `Map.prototype.emplace` method\n// https://github.com/tc39/proposal-upsert\n\n$({\n  target: 'Map',\n  proto: true,\n  real: true,\n  forced: true\n}, {\n  emplace: function emplace(key, handler) {\n    var map = aMap(this);\n    var value, inserted;\n\n    if (has(map, key)) {\n      value = get(map, key);\n\n      if ('update' in handler) {\n        value = handler.update(value, key, map);\n        set(map, key, value);\n      }\n\n      return value;\n    }\n\n    inserted = handler.insert(key, map);\n    set(map, key, inserted);\n    return inserted;\n  }\n});","map":null,"metadata":{},"sourceType":"script"}